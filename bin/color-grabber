#! /usr/bin/env ruby
require 'optparse'
require 'kuler-export'

options = {format: 'sass', verbose: false}
OptionParser.new do |opts|
  opts.banner = "Usage: color-grabber [options] slug1 slug2 slugN"
  opts.on("-s", "--site", "one of 'kuler, colorhex, colourlovers, designseeds'") do |s|
    options[:site] = s
  end
  opts.on("-f", "--format", "format, one of 'sass, css, text'") do |s|
    options[:format] = s
  end
  opts.on("-v", "--verbose", "Run verbosely") do |v|
    options[:verbose] = true
  end
end.parse!

ARGV.each do |slug|
  klass = case options[:site]
          when 'kuler' then Kuler
          when 'colorhex' then ColorHex
          when 'colourlovers' then ColourLovers
          when 'designseeds' then DesignSeeds
  end
  cg = klass.new(slug, verbose:options[:verbose])
  puts "# #{cg.name}"
  if options[:format] = 'sass'
    puts cg.to_sass
  else
    puts cg.to_s
  end
  puts "## end #{cg.name}"
end
